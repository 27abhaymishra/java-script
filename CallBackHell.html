<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Back Hell</title>
</head>
<body>
    <h1>Apna College</h1>



<script>


//async await with error handling.....using try and catch block ->

h1 = document.querySelector('h1');

function changeColor(color , delay ){

    return new Promise((resolve , reject)=>{
        setTimeout(()=>{
            let num = Math.floor(Math.random() * 5) + 1;
            if(num > 3){
                reject("promise rejected")
            }
         h1.style.color = color;
         console.log(`color changed to ${color}!`);
         
         resolve("color changed")
    },delay);
    });
  
}

async function demo(){
  try{
    await changeColor('red' , 1000);
     await changeColor('green' , 1000);
   await changeColor("yellow" , 1000);
   await changeColor("blue" , 1000);
  await  changeColor("pink" , 1000);
  }catch(err){
    console.log("error caught");
    console.log(err);
    
    
  }
  let a = 5;
  console.log(a + 5);
  
    
}

demo();


//async and await

// h1 = document.querySelector('h1');

// function changeColor(color , delay ){

//     return new Promise((resolve , reject)=>{
//         setTimeout(()=>{
//          h1.style.color = color;
//          console.log(`color changed to ${color}!`);
         
//          resolve("color changed")
//     },delay);
//     });
  
// }

// async function demo(){
//    await changeColor('red' , 1000);
//      await changeColor('green' , 1000);
//    await changeColor("yellow" , 1000);
//    await changeColor("blue" , 1000);
//   await  changeColor("pink" , 1000);
    
// }

// demo();




//do by promise 
// h1 = document.querySelector('h1');
// function changeColor(color , delay ){

//     return new Promise((resolve , reject)=>{
//         setTimeout(()=>{
//          h1.style.color = color;
//          resolve("color changed")
//     },delay);
//     })
  
// }

// changeColor("red" , 1000)
// .then(()=>{
//     console.log("red color was completed");
//     return changeColor("orange" ,1000);
    
// })
// .then(()=>{
//     console.log("orange color was completed");
//      return changeColor("blue" ,1000);    
// })
// .then(()=>{
//     console.log("orange color was completed");
//      return changeColor("green" ,1000);    
// })
// .then(()=>{
//     console.log("green color was over");
    
// })



//Callback nesting -> Callback Hell
//call by hell
// h1 = document.querySelector('h1');
// function changeColor(color , delay , nextColorchange){
//     setTimeout(()=>{
//          h1.style.color = color;
//          if(nextColorchange){
//             nextColorchange();
//          }
//     },delay)
// }

// changeColor("red" , 1000, ()=>{
//     changeColor("green" ,1000 ,()=>{
//         changeColor("yellow" ,1000 , ()=>{
//             changeColor("blue" , 1000,()=>{
//              changeColor("orange" ,1000);
//             });
//         });
//     });
// });






    </script>
</body>
</html>